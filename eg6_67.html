<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Ajax example accordion</title>
</head>

<script>
var panels=[];
var displaying=-1;

function onClickAccordionHandlerFunctionality(x){
    if(displaying!=-1){
        panels[displaying+1].style.display='none';
    }
    displaying=x;
    panels[x+1].style.display=panels[x+1].oldDisplay;
    
}

function doIt()
{
    let accord=document.getElementById("mymy");
    let children=accord.childNodes;

    let x=0;
    while(x<children.length){
        //alert(children[x].nodeName);
        if(children[x].nodeName=="H3") panels[panels.length]=children[x];
        if(children[x].nodeName=="DIV") panels[panels.length]=children[x];
        ++x;
    }
    if(panels.length%2!=0) throw "headings and division malformed to create accordion";
    for(let x=0; x<panels.length; x+=2){
        if(panels[x].nodeName!="H3") throw "headings and division malformed to create accordion";
        if(panels[x+1].nodeName!="DIV") throw "headings and division malformed to create accordion";
    }
    
    function onClickAccordionHandler(x)
    {
        return function(){
            onClickAccordionHandlerFunctionality(x);
        };
    }
    

    for(let x=0; x<panels.length; x+=2)
    {
        panels[x].onclick=onClickAccordionHandler(x);
        panels[x+1].oldDisplay=panels[x+1].style.display;
        panels[x+1].style.display="none";
    }

}


window.addEventListener('load',doIt);
</script>

<body>
<div id='mymy'>
<h3> Heading 1</h3>
<div>
1 whatever whatever
2 whatever whatever
3 whatever whatever
4 whatever whatever
5 whatever whatever
6 whatever whatever
7 whatever whatever
</div>
<h3> Heading 2</h3>
<div>
11 whatever whatever
22 whatever whatever
33 whatever whatever
44 whatever whatever
55 whatever whatever
66 whatever whatever
77 whatever whatever
</div>

<h3> Heading 3</h3>
<div>
111 whatever whatever
222 whatever whatever
333 whatever whatever
444 whatever whatever
555 whatever whatever
666 whatever whatever
777 whatever whatever
</div>

</div>

</body>


</html>